(function () {
  const e = {
    appName: 'MagicBar',
    version: '1.0.0',
    cssUrl: './magic-bar.css',
    jsUrl: './magic-bar.js',
    containerId: 'magic-bar-container',
  };
  function t() {
    const t = document.createElement('div');
    return (t.id = e.containerId), document.body.appendChild(t), t;
  }
  function n(e) {
    return new Promise((t, n) => {
      const o = document.createElement('link');
      (o.rel = 'stylesheet'),
        (o.href = e),
        (o.onload = () => t()),
        (o.onerror = () => n(new Error(`Failed to load CSS: ${e}`))),
        document.head.appendChild(o);
    });
  }
  function o(e) {
    return new Promise((t, n) => {
      const o = document.createElement('script');
      (o.type = 'text/javascript'),
        (o.src = e),
        (o.onload = () => t()),
        (o.onerror = () => n(new Error(`Failed to load JavaScript: ${e}`))),
        document.body.appendChild(o);
    });
  }
  async function r() {
    try {
      const r = t();
      await n(e.cssUrl),
        await o(e.jsUrl),
        window[e.appName] && 'function' == typeof window[e.appName].init
          ? window[e.appName].init(r)
          : console.error(
              `${e.appName} application not found or init method not available`,
            );
    } catch (e) {
      console.error('Failed to initialize Magic Bar:', e);
    }
  }
  'loading' === document.readyState
    ? document.addEventListener('DOMContentLoaded', r)
    : r();
})();
