<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Magic Bar Bootloader Test</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			padding: 20px;
			background-color: #f5f5f5;
		}

		h1 {
			color: #333;
		}

		.content {
			background-color: white;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			margin-top: 20px;
		}
	</style>
</head>

<body>
	<h1>Testing Magic Bar Bootloader</h1>

	<div class="content">
		<p>This is a test page to verify that the Magic Bar bootloader works correctly.</p>
		<p>The Magic Bar should appear at the top of the page.</p>
	</div>

	<!-- Include the bootloader with local paths for testing -->
	<script>
		// Magic Bar Bootloader for testing
		(function () {
			// Configuration with local paths
			const config = {
				appName: 'MagicBar',
				version: '1.0.0',
				cssUrl: './dist/magic-bar.css',
				jsUrl: './dist/magic-bar.js',
				containerId: 'magic-bar-container'
			};

			// Create container for the app
			function createContainer() {
				const container = document.createElement('div');
				container.id = config.containerId;
				document.body.appendChild(container);
				return container;
			}

			// Load CSS
			function loadCSS(url) {
				return new Promise((resolve, reject) => {
					const link = document.createElement('link');
					link.rel = 'stylesheet';
					link.href = url;

					link.onload = () => resolve();
					link.onerror = () => reject(new Error(`Failed to load CSS: ${url}`));

					document.head.appendChild(link);
				});
			}

			// Load JS
			function loadJS(url) {
				return new Promise((resolve, reject) => {
					const script = document.createElement('script');
					script.type = 'text/javascript';
					script.src = url;

					script.onload = () => resolve();
					script.onerror = () => reject(new Error(`Failed to load JavaScript: ${url}`));

					document.body.appendChild(script);
				});
			}

			// Initialize the app
			async function init() {
				try {
					// Create container
					const container = createContainer();

					// Load CSS first
					await loadCSS(config.cssUrl);

					// Then load JavaScript
					await loadJS(config.jsUrl);

					// Initialize the app
					if (window[config.appName] && typeof window[config.appName].init === 'function') {
						window[config.appName].init(container);
					} else {
						console.error(`${config.appName} application not found or init method not available`);
					}
				} catch (error) {
					console.error('Failed to initialize Magic Bar:', error);
				}
			}

			// Run when DOM is ready
			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', init);
			} else {
				init();
			}
		})();
	</script>
</body>

</html>